# def is_valid_position(board: tuple[tuple[str]]) -> bool:
#     # Flatten the board for easier processing

#     flat_board = [cell for row in board for cell in row]
    
#     x_count = flat_board.count('X')
#     o_count = flat_board.count('O')
    
#     # Check the counts are valid
#     if not (x_count == o_count or x_count == o_count + 1):
#         return False
    
#     # Check if 'X' wins
#     def check_win(player):
#         # Check rows
#         for row in board:
#             if all(cell == player for cell in row):
#                 return True
#         # Check columns
#         for col in range(3):
#             if all(board[row][col] == player for row in range(3)):
#                 return True
#         # Check diagonals
#         if all(board[i][i] == player for i in range(3)):
#             return True
#         if all(board[i][2 - i] == player for i in range(3)):
#             return True
#         return False
    
#     x_wins = check_win('X')
#     o_wins = check_win('O')
    
#     # Both players cannot win
#     if x_wins and o_wins:
#         return False
    
#     # If 'X' wins, then 'X' must have one more move than 'O'
#     if x_wins and x_count != o_count + 1:
#         return False
    
#     # If 'O' wins, then 'O' must have same moves as 'X'
#     if o_wins and x_count != o_count:
#         return False
    
#     return True


#Other Solutions:
from functools import reduce;

VALID = [0,1,3,9,27,81,243,729,2187,6561,5,7,11,15,19,21,29,33,45,55,57,63,83,87,99,135,163,165,171,189,245,249,261,297,405,487,489,495,513,567,731,735,747,783,891,1215,1459,1461,1467,1485,1539,1701,2189,2193,2205,2241,2349,2673,3645,4375,4377,4383,4401,4455,4617,5103,6563,6567,6579,6615,6723,7047,8019,10935,13123,13125,13131,13149,13203,13365,13851,15309,14,16,22,32,34,38,42,46,48,58,64,66,86,88,92,96,100,102,110,114,126,136,138,144,166,172,174,190,192,198,248,250,254,258,262,264,272,276,288,298,300,306,326,330,342,378,406,408,414,432,490,496,498,514,516,522,568,570,576,594,734,736,740,744,748,750,758,762,774,784,786,792,812,816,828,864,892,894,900,918,974,978,990,1026,1134,1216,1218,1224,1242,1296,1462,1468,1470,1486,1488,1494,1540,1542,1548,1566,1702,1704,1710,1728,1782,2192,2194,2198,2202,2206,2208,2216,2220,2232,2242,2244,2250,2270,2274,2286,2322,2350,2352,2358,2376,2432,2436,2448,2484,2592,2674,2676,2682,2700,2754,2918,2922,2934,2970,3078,3402,3646,3648,3654,3672,3726,3888,4378,4384,4386,4402,4404,4410,4456,4458,4464,4482,4618,4620,4626,4644,4698,5104,5106,5112,5130,5184,5346,6566,6568,6572,6576,6580,6582,6590,6594,6606,6616,6618,6624,6644,6648,6660,6696,6724,6726,6732,6750,6806,6810,6822,6858,6966,7048,7050,7056,7074,7128,7292,7296,7308,7344,7452,7776,8020,8022,8028,8046,8100,8262,8750,8754,8766,8802,8910,9234,10206,10936,10938,10944,10962,11016,11178,11664,13126,13132,13134,13150,13152,13158,13204,13206,13212,13230,13366,13368,13374,13392,13446,13852,13854,13860,13878,13932,14094,15310,15312,15318,15336,15390,15552,16038,44,50,52,68,70,76,98,104,106,116,128,132,140,142,146,150,154,156,176,178,184,194,196,200,204,208,210,220,226,228,260,266,268,278,290,294,302,304,308,312,316,318,332,344,348,380,384,396,410,412,416,420,424,426,434,438,450,460,462,468,500,502,508,518,520,524,528,532,534,544,550,552,572,574,578,582,586,588,596,600,612,622,624,630,652,658,660,676,678,684,746,752,754,764,776,780,788,790,794,798,802,804,818,830,834,866,870,882,896,898,902,906,910,912,920,924,936,946,948,954,980,992,996,1028,1032,1044,1136,1140,1152,1188,1220,1222,1226,1230,1234,1236,1244,1248,1260,1270,1272,1278,1298,1302,1314,1350,1378,1380,1386,1404,1472,1474,1480,1490,1492,1496,1500,1504,1506,1516,1522,1524,1544,1546,1550,1554,1558,1560,1568,1572,1584,1594,1596,1602,1624,1630,1632,1648,1650,1656,1706,1708,1712,1716,1720,1722,1730,1734,1746,1756,1758,1764,1784,1788,1800,1836,1864,1866,1872,1890,1948,1954,1956,1972,1974,1980,2026,2028,2034,2052,2204,2210,2212,2222,2234,2238,2246,2248,2252,2256,2260,2262,2276,2288,2292,2324,2328,2340,2354,2356,2360,2364,2368,2370,2378,2382,2394,2404,2406,2412,2438,2450,2454,2486,2490,2502,2594,2598,2610,2646,2678,2680,2684,2688,2692,2694,2702,2706,2718,2728,2730,2736,2756,2760,2772,2808,2836,2838,2844,2862,2924,2936,2940,2972,2976,2988,3080,3084,3096,3132,3404,3408,3420,3456,3564,3650,3652,3656,3660,3664,3666,3674,3678,3690,3700,3702,3708,3728,3732,3744,3780,3808,3810,3816,3834,3890,3894,3906,3942,4050,4132,4134,4140,4158,4212,4388,4390,4396,4406,4408,4412,4416,4420,4422,4432,4438,4440,4460,4462,4466,4470,4474,4476,4484,4488,4500,4510,4512,4518,4540,4546,4548,4564,4566,4572,4622,4624,4628,4632,4636,4638,4646,4650,4662,4672,4674,4680,4700,4704,4716,4752,4780,4782,4788,4806,4864,4870,4872,4888,4890,4896,4942,4944,4950,4968,5108,5110,5114,5118,5122,5124,5132,5136,5148,5158,5160,5166,5186,5190,5202,5238,5266,5268,5274,5292,5348,5352,5364,5400,5508,5590,5592,5598,5616,5670,5836,5842,5844,5860,5862,5868,5914,5916,5922,5940,6076,6078,6084,6102,6156,6578,6584,6586,6596,6608,6612,6620,6622,6626,6630,6634,6636,6650,6662,6666,6698,6702,6714,6728,6730,6734,6738,6742,6744,6752,6756,6768,6778,6780,6786,6812,6824,6828,6860,6864,6876,6968,6972,6984,7020,7052,7054,7058,7062,7066,7068,7076,7080,7092,7102,7104,7110,7130,7134,7146,7182,7210,7212,7218,7236,7298,7310,7314,7346,7350,7362,7454,7458,7470,7506,7778,7782,7794,7830,7938,8024,8026,8030,8034,8038,8040,8048,8052,8064,8074,8076,8082,8102,8106,8118,8154,8182,8184,8190,8208,8264,8268,8280,8316,8424,8506,8508,8514,8532,8586,8756,8768,8772,8804,8808,8820,8912,8916,8928,8964,9236,9240,9252,9288,9396,10208,10212,10224,10260,10368,10692,10940,10942,10946,10950,10954,10956,10964,10968,10980,10990,10992,10998,11018,11022,11034,11070,11098,11100,11106,11124,11180,11184,11196,11232,11340,11422,11424,11430,11448,11502,11666,11670,11682,11718,11826,12150,12394,12396,12402,12420,12474,12636,13136,13138,13144,13154,13156,13160,13164,13168,13170,13180,13186,13188,13208,13210,13214,13218,13222,13224,13232,13236,13248,13258,13260,13266,13288,13294,13296,13312,13314,13320,13370,13372,13376,13380,13384,13386,13394,13398,13410,13420,13422,13428,13448,13452,13464,13500,13528,13530,13536,13554,13612,13618,13620,13636,13638,13644,13690,13692,13698,13716,13856,13858,13862,13866,13870,13872,13880,13884,13896,13906,13908,13914,13934,13938,13950,13986,14014,14016,14022,14040,14096,14100,14112,14148,14256,14338,14340,14346,14364,14418,14584,14590,14592,14608,14610,14616,14662,14664,14670,14688,14824,14826,14832,14850,14904,15314,15316,15320,15324,15328,15330,15338,15342,15354,15364,15366,15372,15392,15396,15408,15444,15472,15474,15480,15498,15554,15558,15570,15606,15714,15796,15798,15804,15822,15876,16040,16044,16056,16092,16200,16524,16768,16770,16776,16794,16848,17010,17500,17506,17508,17524,17526,17532,17578,17580,17586,17604,17740,17742,17748,17766,17820,18226,18228,18234,18252,18306,18468,125,131,133,149,151,157,203,205,211,229,287,293,295,311,313,319,341,347,349,359,371,375,383,385,389,393,397,399,419,421,427,437,439,443,447,451,453,463,469,471,527,529,535,553,581,583,589,599,601,605,609,613,615,625,631,633,661,679,685,687,773,779,781,797,799,805,827,833,835,845,857,861,869,871,875,879,883,885,905,907,913,923,925,929,933,937,939,949,955,957,989,995,997,1007,1019,1023,1031,1033,1037,1041,1045,1047,1061,1073,1077,1109,1113,1125,1139,1141,1145,1149,1153,1155,1163,1167,1179,1189,1191,1197,1229,1231,1237,1247,1249,1253,1257,1261,1263,1273,1279,1281,1301,1303,1307,1311,1315,1317,1325,1329,1341,1351,1353,1359,1381,1387,1389,1405,1407,1413,1499,1501,1507,1525,1553,1555,1561,1571,1573,1577,1581,1585,1587,1597,1603,1605,1633,1651,1657,1659,1715,1717,1723,1733,1735,1739,1743,1747,1749,1759,1765,1767,1787,1789,1793,1797,1801,1803,1811,1815,1827,1837,1839,1845,1867,1873,1875,1891,1893,1899,1957,1975,1981,1983,2029,2035,2037,2053,2055,2061,2231,2237,2239,2255,2257,2263,2285,2291,2293,2303,2315,2319,2327,2329,2333,2337,2341,2343,2363,2365,2371,2381,2383,2387,2391,2395,2397,2407,2413,2415,2447,2453,2455,2465,2477,2481,2489,2491,2495,2499,2503,2505,2519,2531,2535,2567,2571,2583,2597,2599,2603,2607,2611,2613,2621,2625,2637,2647,2649,2655,2687,2689,2695,2705,2707,2711,2715,2719,2721,2731,2737,2739,2759,2761,2765,2769,2773,2775,2783,2787,2799,2809,2811,2817,2839,2845,2847,2863,2865,2871,2933,2939,2941,2951,2963,2967,2975,2977,2981,2985,2989,2991,3005,3017,3021,3053,3057,3069,3083,3085,3089,3093,3097,3099,3107,3111,3123,3133,3135,3141,3167,3179,3183,3215,3219,3231,3323,3327,3339,3375,3407,3409,3413,3417,3421,3423,3431,3435,3447,3457,3459,3465,3485,3489,3501,3537,3565,3567,3573,3591,3659,3661,3667,3677,3679,3683,3687,3691,3693,3703,3709,3711,3731,3733,3737,3741,3745,3747,3755,3759,3771,3781,3783,3789,3811,3817,3819,3835,3837,3843,3893,3895,3899,3903,3907,3909,3917,3921,3933,3943,3945,3951,3971,3975,3987,4023,4051,4053,4059,4077,4135,4141,4143,4159,4161,4167,4213,4215,4221,4239,4415,4417,4423,4441,4469,4471,4477,4487,4489,4493,4497,4501,4503,4513,4519,4521,4549,4567,4573,4575,4631,4633,4639,4649,4651,4655,4659,4663,4665,4675,4681,4683,4703,4705,4709,4713,4717,4719,4727,4731,4743,4753,4755,4761,4783,4789,4791,4807,4809,4815,4873,4891,4897,4899,4945,4951,4953,4969,4971,4977,5117,5119,5125,5135,5137,5141,5145,5149,5151,5161,5167,5169,5189,5191,5195,5199,5203,5205,5213,5217,5229,5239,5241,5247,5269,5275,5277,5293,5295,5301,5351,5353,5357,5361,5365,5367,5375,5379,5391,5401,5403,5409,5429,5433,5445,5481,5509,5511,5517,5535,5593,5599,5601,5617,5619,5625,5671,5673,5679,5697,5845,5863,5869,5871,5917,5923,5925,5941,5943,5949,6079,6085,6087,6103,6105,6111,6157,6159,6165,6183,6605,6611,6613,6629,6631,6637,6659,6665,6667,6677,6689,6693,6701,6703,6707,6711,6715,6717,6737,6739,6745,6755,6757,6761,6765,6769,6771,6781,6787,6789,6821,6827,6829,6839,6851,6855,6863,6865,6869,6873,6877,6879,6893,6905,6909,6941,6945,6957,6971,6973,6977,6981,6985,6987,6995,6999,7011,7021,7023,7029,7061,7063,7069,7079,7081,7085,7089,7093,7095,7105,7111,7113,7133,7135,7139,7143,7147,7149,7157,7161,7173,7183,7185,7191,7213,7219,7221,7237,7239,7245,7307,7313,7315,7325,7337,7341,7349,7351,7355,7359,7363,7365,7379,7391,7395,7427,7431,7443,7457,7459,7463,7467,7471,7473,7481,7485,7497,7507,7509,7515,7541,7553,7557,7589,7593,7605,7697,7701,7713,7749,7781,7783,7787,7791,7795,7797,7805,7809,7821,7831,7833,7839,7859,7863,7875,7911,7939,7941,7947,7965,8033,8035,8041,8051,8053,8057,8061,8065,8067,8077,8083,8085,8105,8107,8111,8115,8119,8121,8129,8133,8145,8155,8157,8163,8185,8191,8193,8209,8211,8217,8267,8269,8273,8277,8281,8283,8291,8295,8307,8317,8319,8325,8345,8349,8361,8397,8425,8427,8433,8451,8509,8515,8517,8533,8535,8541,8587,8589,8595,8613,8765,8771,8773,8783,8795,8799,8807,8809,8813,8817,8821,8823,8837,8849,8853,8885,8889,8901,8915,8917,8921,8925,8929,8931,8939,8943,8955,8965,8967,8973,8999,9011,9015,9047,9051,9063,9155,9159,9171,9207,9239,9241,9245,9249,9253,9255,9263,9267,9279,9289,9291,9297,9317,9321,9333,9369,9397,9399,9405,9423,9485,9497,9501,9533,9537,9549,9641,9645,9657,9693,9965,9969,9981,10017,10125,10211,10213,10217,10221,10225,10227,10235,10239,10251,10261,10263,10269,10289,10293,10305,10341,10369,10371,10377,10395,10451,10455,10467,10503,10611,10693,10695,10701,10719,10773,10949,10951,10957,10967,10969,10973,10977,10981,10983,10993,10999,11001,11021,11023,11027,11031,11035,11037,11045,11049,11061,11071,11073,11079,11101,11107,11109,11125,11127,11133,11183,11185,11189,11193,11197,11199,11207,11211,11223,11233,11235,11241,11261,11265,11277,11313,11341,11343,11349,11367,11425,11431,11433,11449,11451,11457,11503,11505,11511,11529,11669,11671,11675,11679,11683,11685,11693,11697,11709,11719,11721,11727,11747,11751,11763,11799,11827,11829,11835,11853,11909,11913,11925,11961,12069,12151,12153,12159,12177,12231,12397,12403,12405,12421,12423,12429,12475,12477,12483,12501,12637,12639,12645,12663,12717,13163,13165,13171,13189,13217,13219,13225,13235,13237,13241,13245,13249,13251,13261,13267,13269,13297,13315,13321,13323,13379,13381,13387,13397,13399,13403,13407,13411,13413,13423,13429,13431,13451,13453,13457,13461,13465,13467,13475,13479,13491,13501,13503,13509,13531,13537,13539,13555,13557,13563,13621,13639,13645,13647,13693,13699,13701,13717,13719,13725,13865,13867,13873,13883,13885,13889,13893,13897,13899,13909,13915,13917,13937,13939,13943,13947,13951,13953,13961,13965,13977,13987,13989,13995,14017,14023,14025,14041,14043,14049,14099,14101,14105,14109,14113,14115,14123,14127,14139,14149,14151,14157,14177,14181,14193,14229,14257,14259,14265,14283,14341,14347,14349,14365,14367,14373,14419,14421,14427,14445,14593,14611,14617,14619,14665,14671,14673,14689,14691,14697,14827,14833,14835,14851,14853,14859,14905,14907,14913,14931,15323,15325,15331,15341,15343,15347,15351,15355,15357,15367,15373,15375,15395,15397,15401,15405,15409,15411,15419,15423,15435,15445,15447,15453,15475,15481,15483,15499,15501,15507,15557,15559,15563,15567,15571,15573,15581,15585,15597,15607,15609,15615,15635,15639,15651,15687,15715,15717,15723,15741,15799,15805,15807,15823,15825,15831,15877,15879,15885,15903,16043,16045,16049,16053,16057,16059,16067,16071,16083,16093,16095,16101,16121,16125,16137,16173,16201,16203,16209,16227,16283,16287,16299,16335,16443,16525,16527,16533,16551,16605,16771,16777,16779,16795,16797,16803,16849,16851,16857,16875,17011,17013,17019,17037,17091,17509,17527,17533,17535,17581,17587,17589,17605,17607,17613,17743,17749,17751,17767,17769,17775,17821,17823,17829,17847,18229,18235,18237,18253,18255,18261,18307,18309,18315,18333,18469,18471,18477,18495,18549,395,401,403,449,455,457,473,475,481,611,617,619,635,637,643,689,691,697,863,887,889,935,941,959,961,967,1025,1043,1049,1051,1079,1115,1127,1131,1151,1157,1159,1169,1181,1185,1193,1195,1199,1203,1207,1209,1259,1265,1283,1285,1291,1319,1321,1331,1343,1347,1355,1357,1369,1371,1391,1393,1399,1409,1415,1419,1425,1435,1441,1443,1583,1589,1591,1607,1609,1615,1661,1663,1669,1745,1751,1753,1769,1771,1777,1799,1805,1807,1841,1843,1847,1851,1855,1857,1877,1879,1885,1895,1897,1901,1905,1909,1911,1921,1927,1929,1985,1987,1993,2039,2041,2047,2057,2059,2063,2067,2071,2073,2083,2089,2091,2137,2143,2145,2321,2339,2347,2393,2399,2401,2417,2419,2425,2483,2501,2507,2509,2537,2573,2585,2589,2609,2615,2617,2627,2639,2643,2651,2653,2657,2661,2665,2667,2717,2723,2725,2741,2743,2749,2771,2779,2789,2801,2805,2815,2819,2823,2827,2849,2851,2857,2867,2869,2873,2877,2881,2883,2893,2899,2901,2969,2987,2993,2995,3023,3059,3071,3075,3095,3101,3103,3113,3125,3129,3137,3139,3143,3147,3151,3153,3185,3221,3233,3237,3329,3341,3345,3377,3381,3393,3419,3425,3427,3437,3449,3453,3461,3463,3467,3471,3475,3477,3491,3503,3507,3539,3543,3555,3569,3571,3575,3579,3583,3585,3593,3597,3609,3619,3621,3627,3689,3695,3697,3713,3715,3721,3743,3751,3761,3773,3777,3787,3791,3795,3799,3821,3823,3829,3839,3841,3845,3849,3853,3855,3865,3871,3873,3905,3911,3913,3923,3935,3939,3947,3949,3953,3957,3961,3963,3977,3989,3993,4025,4029,4041,4055,4057,4061,4065,4069,4071,4079,4083,4095,4105,4107,4113,4145,4147,4153,4163,4165,4169,4173,4177,4179,4189,4195,4197,4219,4223,4227,4231,4241,4245,4257,4267,4275,4297,4303,4305,4321,4323,4329,4499,4505,4507,4523,4525,4531,4577,4579,4585,4661,4667,4669,4685,4687,4693,4715,4721,4723,4757,4759,4763,4767,4771,4773,4793,4795,4801,4811,4813,4817,4821,4825,4827,4837,4843,4845,4901,4903,4909,4955,4957,4963,4973,4975,4979,4983,4987,4989,4999,5005,5007,5053,5059,5061,5147,5153,5171,5173,5179,5207,5209,5219,5231,5235,5243,5245,5257,5259,5279,5281,5287,5297,5303,5307,5313,5323,5329,5331,5363,5369,5371,5381,5393,5397,5405,5407,5411,5415,5419,5421,5435,5447,5451,5483,5487,5499,5513,5515,5519,5523,5527,5529,5537,5541,5553,5563,5565,5571,5603,5605,5611,5621,5627,5631,5637,5647,5653,5655,5675,5677,5689,5691,5699,5703,5715,5725,5727,5755,5761,5763,5781,5787,5873,5875,5881,5927,5929,5935,5945,5947,5951,5955,5959,5961,5971,5977,5979,6025,6031,6033,6089,6091,6097,6107,6109,6113,6117,6121,6123,6133,6139,6141,6161,6163,6167,6171,6175,6177,6211,6213,6219,6241,6247,6249,6265,6267,6273,6349,6355,6357,6403,6409,6411,6427,6429,6435,6695,6713,6719,6767,6773,6775,6791,6793,6799,6857,6881,6883,6911,6947,6959,6963,6989,6991,7001,7013,7017,7025,7027,7039,7041,7091,7097,7099,7115,7117,7123,7145,7151,7163,7175,7179,7187,7193,7197,7203,7223,7225,7231,7241,7243,7247,7251,7255,7257,7267,7273,7275,7343,7361,7367,7369,7397,7433,7445,7449,7469,7475,7477,7487,7499,7503,7511,7513,7517,7521,7525,7527,7559,7595,7607,7611,7703,7715,7719,7751,7755,7767,7793,7799,7801,7811,7823,7827,7835,7837,7841,7845,7849,7851,7865,7877,7881,7913,7917,7929,7943,7945,7949,7953,7957,7959,7967,7971,7983,7993,7995,8001,8063,8069,8071,8087,8089,8095,8117,8123,8135,8147,8151,8159,8165,8169,8175,8195,8197,8203,8213,8215,8219,8223,8227,8229,8239,8245,8247,8285,8287,8297,8309,8313,8321,8323,8335,8337,8351,8363,8367,8399,8403,8415,8429,8431,8443,8445,8453,8457,8469,8479,8481,8519,8521,8527,8537,8539,8543,8547,8551,8553,8563,8569,8571,8591,8597,8601,8607,8615,8619,8631,8643,8649,8671,8677,8679,8695,8697,8703,8801,8819,8825,8827,8855,8891,8903,8907,8927,8933,8935,8945,8957,8961,8969,8971,8975,8979,8983,8985,9017,9053,9065,9069,9161,9173,9177,9209,9213,9225,9251,9257,9259,9269,9281,9285,9293,9295,9299,9303,9307,9309,9323,9335,9339,9371,9375,9387,9401,9403,9407,9411,9415,9417,9425,9429,9441,9451,9453,9459,10223,10229,10231,10241,10253,10257,10265,10267,10271,10275,10279,10281,10295,10307,10311,10343,10347,10359,10373,10375,10379,10383,10387,10389,10397,10401,10413,10423,10425,10431,10457,10469,10473,10505,10509,10521,10613,10617,10629,10665,10697,10699,10703,10707,10711,10713,10721,10725,10737,10747,10749,10755,10775,10779,10791,10827,10855,10857,10863,10881,10979,10985,10987,11003,11005,11011,11033,11039,11051,11063,11067,11075,11081,11085,11091,11111,11113,11119,11129,11131,11135,11139,11143,11145,11155,11161,11163,11201,11203,11213,11225,11229,11237,11239,11251,11253,11267,11279,11283,11315,11319,11331,11345,11347,11359,11361,11369,11373,11385,11395,11397,11435,11437,11443,11453,11455,11459,11463,11467,11469,11479,11485,11487,11507,11513,11517,11523,11531,11535,11547,11559,11565,11587,11593,11595,11611,11613,11619,11681,11687,11689,11699,11711,11715,11723,11725,11729,11733,11737,11739,11753,11765,11769,11801,11805,11817,11831,11833,11837,11841,11845,11847,11855,11859,11871,11881,11883,11889,11915,11927,11931,11963,11967,11979,12071,12075,12087,12123,12155,12157,12161,12165,12169,12171,12179,12183,12195,12205,12207,12213,12233,12237,12249,12285,12313,12315,12321,12339,12407,12409,12415,12425,12427,12431,12435,12439,12441,12451,12457,12459,12479,12485,12489,12495,12503,12507,12519,12531,12537,12559,12565,12567,12583,12585,12591,12641,12643,12655,12657,12665,12669,12681,12691,12693,12719,12723,12735,12771,12799,12801,12825,12883,12889,12891,12907,12909,12915,12963,12969,12987,13247,13253,13255,13271,13273,13279,13325,13327,13333,13409,13415,13417,13433,13435,13441,13463,13469,13471,13505,13507,13511,13515,13519,13521,13541,13543,13549,13559,13561,13565,13569,13573,13575,13585,13591,13593,13649,13651,13657,13703,13705,13711,13721,13723,13727,13731,13735,13737,13747,13753,13755,13801,13807,13809,13895,13901,13919,13921,13927,13955,13957,13967,13979,13983,13991,13993,14005,14007,14027,14029,14035,14045,14051,14055,14061,14071,14077,14079,14111,14117,14119,14129,14141,14145,14153,14155,14159,14163,14167,14169,14183,14195,14199,14231,14235,14247,14261,14263,14267,14271,14275,14277,14285,14289,14301,14311,14313,14319,14351,14353,14359,14369,14375,14379,14385,14395,14401,14403,14423,14425,14437,14439,14447,14451,14463,14473,14475,14503,14509,14511,14529,14535,14621,14623,14629,14675,14677,14683,14693,14695,14699,14703,14707,14709,14719,14725,14727,14773,14779,14781,14837,14839,14845,14855,14857,14861,14865,14869,14871,14881,14887,14889,14909,14911,14915,14919,14923,14925,14959,14961,14967,14989,14995,14997,15013,15015,15021,15097,15103,15105,15151,15157,15159,15175,15177,15183,15353,15359,15361,15377,15379,15385,15407,15415,15425,15437,15441,15451,15455,15459,15463,15485,15487,15493,15503,15505,15509,15513,15517,15519,15529,15535,15537,15569,15575,15577,15587,15599,15603,15611,15613,15617,15621,15625,15627,15641,15653,15657,15689,15693,15705,15719,15721,15725,15729,15733,15735,15743,15747,15759,15769,15771,15777,15809,15811,15817,15827,15829,15833,15837,15841,15843,15853,15859,15861,15883,15887,15891,15895,15905,15909,15921,15931,15939,15961,15967,15969,15985,15987,15993,16055,16061,16063,16073,16085,16089,16097,16099,16103,16107,16111,16113,16127,16139,16143,16175,16179,16191,16205,16207,16211,16215,16219,16221,16229,16233,16245,16255,16257,16263,16289,16301,16305,16337,16341,16353,16445,16449,16461,16497,16529,16531,16535,16539,16543,16545,16553,16557,16569,16579,16581,16587,16607,16611,16623,16659,16687,16689,16695,16713,16781,16783,16789,16799,16801,16805,16809,16813,16815,16825,16831,16833,16855,16859,16863,16867,16877,16881,16893,16903,16911,16933,16939,16941,16957,16959,16965,17015,17017,17021,17025,17029,17031,17039,17043,17055,17065,17067,17073,17093,17097,17109,17145,17173,17175,17181,17199,17257,17263,17265,17281,17283,17289,17335,17343,17361,17537,17539,17545,17591,17593,17599,17609,17611,17615,17619,17623,17625,17635,17641,17643,17689,17695,17697,17753,17755,17761,17771,17773,17777,17781,17785,17787,17797,17803,17805,17825,17827,17831,17835,17839,17841,17875,17877,17883,17905,17911,17913,17929,17931,17937,18013,18019,18021,18067,18073,18075,18091,18093,18099,18239,18241,18247,18257,18263,18267,18273,18283,18289,18291,18311,18313,18325,18327,18335,18339,18351,18361,18363,18391,18397,18399,18417,18423,18473,18475,18479,18483,18487,18489,18497,18501,18513,18523,18525,18531,18551,18555,18567,18603,18631,18633,18639,18657,18715,18721,18723,18741,18747,18793,18795,18819,18985,18991,18993,19039,19045,19047,19063,19065,19071,19201,19207,19209,19225,19227,19233,19279,19281,19287,1124,1130,1132,1178,1184,1186,1202,1204,1210,1340,1346,1348,1364,1366,1372,1418,1420,1426,1826,1832,1834,1852,1858,1904,1906,1930,2066,2068,2074,2092,2146,2582,2588,2590,2636,2642,2644,2660,2662,2668,2798,2804,2806,2822,2824,2830,2876,2878,2884,3068,3074,3076,3122,3128,3130,3146,3148,3154,3230,3236,3238,3302,3314,3318,3338,3344,3346,3356,3368,3372,3380,3382,3386,3390,3394,3396,3446,3452,3454,3470,3472,3478,3500,3506,3508,3518,3530,3534,3542,3544,3548,3552,3556,3558,3578,3580,3586,3596,3598,3602,3606,3610,3612,3770,3776,3778,3796,3802,3848,3850,3874,3932,3938,3940,3958,3964,3986,3992,3994,4004,4016,4020,4030,4038,4042,4044,4064,4066,4082,4084,4088,4092,4108,4114,4116,4172,4174,4180,4198,4226,4228,4234,4244,4246,4250,4254,4258,4260,4270,4276,4278,4306,4324,4330,4332,4742,4748,4750,4766,4768,4774,4820,4828,4846,4982,4984,4990,5008,5062,5228,5234,5236,5252,5254,5260,5306,5314,5332,5390,5396,5398,5414,5416,5422,5444,5450,5452,5462,5474,5478,5486,5488,5492,5496,5500,5502,5522,5530,5540,5546,5554,5556,5566,5572,5574,5630,5632,5638,5656,5684,5686,5692,5702,5704,5708,5712,5716,5718,5728,5734,5736,5764,5782,5788,5790,5954,5956,5962,5980,6034,6116,6118,6124,6142,6170,6172,6178,6188,6190,6194,6198,6202,6204,6214,6220,6222,6250,6268,6274,6276,6358,6412,6430,6436,6438,6956,6962,6964,7010,7016,7018,7034,7036,7042,7172,7178,7180,7196,7198,7204,7250,7252,7258,7442,7448,7450,7496,7502,7504,7520,7522,7528,7604,7610,7612,7676,7688,7692,7712,7718,7720,7730,7742,7746,7754,7756,7760,7764,7768,7770,7820,7826,7828,7844,7846,7852,7874,7880,7882,7892,7904,7908,7916,7918,7922,7926,7930,7932,7952,7954,7960,7970,7972,7976,7980,7984,7986,8144,8150,8152,8170,8176,8222,8224,8248,8306,8312,8314,8332,8338,8360,8366,8368,8378,8390,8394,8404,8412,8416,8418,8438,8440,8456,8458,8462,8466,8482,8488,8490,8546,8548,8554,8572,8600,8602,8608,8618,8620,8624,8628,8632,8634,8644,8650,8652,8680,8698,8704,8706,8900,8906,8908,8954,8960,8962,8978,8980,8986,9062,9068,9070,9134,9146,9150,9170,9176,9178,9188,9200,9204,9212,9214,9218,9222,9226,9228,9278,9284,9286,9302,9304,9310,9332,9338,9340,9350,9362,9366,9374,9376,9380,9384,9388,9390,9410,9412,9418,9428,9430,9434,9438,9442,9444,9548,9554,9556,9620,9632,9636,9656,9662,9664,9674,9686,9690,9698,9700,9704,9708,9712,9714,9782,9794,9798,9890,9902,9906,9938,9942,9954,9980,9986,9988,9998,10010,10014,10022,10024,10028,10032,10036,10038,10052,10064,10068,10100,10104,10116,10130,10132,10136,10140,10144,10146,10154,10158,10170,10250,10256,10258,10276,10282,10304,10310,10312,10322,10334,10338,10348,10356,10360,10362,10382,10384,10400,10402,10406,10410,10426,10432,10434,10466,10472,10474,10484,10496,10500,10510,10518,10522,10524,10538,10550,10554,10590,10602,10616,10618,10622,10626,10640,10644,10666,10668,10674,10706,10708,10714,10724,10726,10730,10734,10738,10740,10750,10756,10758,10778,10780,10784,10788,10792,10794,10802,10806,10818,10828,10830,10836,10858,10864,10866,10882,10884,10890,11060,11066,11068,11084,11086,11092,11138,11146,11164,11222,11228,11230,11246,11248,11254,11276,11282,11284,11294,11306,11310,11318,11320,11324,11328,11332,11334,11354,11362,11372,11378,11386,11388,11398,11404,11406,11462,11464,11470,11488,11516,11518,11524,11534,11536,11540,11544,11548,11550,11560,11566,11568,11596,11614,11620,11622,11708,11714,11716,11732,11734,11740,11762,11768,11770,11780,11792,11796,11804,11806,11810,11814,11818,11820,11840,11848,11858,11864,11872,11874,11884,11890,11892,11924,11930,11932,11942,11954,11958,11966,11968,11972,11976,11980,11982,11996,12008,12012,12044,12048,12060,12074,12080,12088,12090,12098,12114,12124,12126,12132,12164,12166,12172,12182,12184,12188,12192,12196,12198,12208,12214,12216,12236,12238,12242,12246,12250,12252,12260,12264,12276,12286,12288,12294,12316,12322,12324,12340,12342,12348,12434,12436,12442,12460,12488,12490,12496,12506,12508,12512,12516,12520,12522,12532,12538,12540,12568,12586,12592,12594,12650,12652,12658,12668,12670,12674,12678,12682,12684,12694,12700,12702,12722,12724,12728,12732,12736,12738,12746,12750,12762,12772,12774,12780,12802,12808,12810,12826,12828,12834,12892,12910,12916,12918,12964,12970,12972,12988,12990,12996,13490,13496,13498,13514,13516,13522,13570,13576,13594,13730,13732,13756,13810,13976,13982,13984,14000,14002,14008,14056,14062,14080,14138,14144,14146,14162,14164,14170,14192,14198,14200,14210,14222,14226,14234,14236,14240,14244,14248,14250,14272,14278,14290,14298,14302,14304,14314,14320,14322,14378,14380,14404,14432,14434,14450,14452,14456,14460,14476,14482,14484,14512,14530,14536,14538,14702,14704,14710,14728,14782,14864,14866,14872,14890,14918,14920,14926,14936,14938,14942,14946,14950,14952,14962,14968,14970,14998,15016,15022,15024,15106,15160,15178,15184,15186,15434,15440,15442,15458,15460,15466,15514,15520,15538,15596,15602,15604,15620,15622,15628,15650,15656,15658,15668,15680,15684,15692,15694,15698,15702,15706,15708,15730,15736,15748,15756,15760,15762,15772,15778,15780,15836,15838,15862,15890,15892,15908,15910,15914,15918,15934,15940,15942,15970,15988,15994,15996,16082,16088,16090,16106,16108,16114,16136,16142,16144,16154,16166,16170,16178,16180,16184,16188,16192,16194,16216,16222,16234,16242,16246,16248,16258,16264,16266,16298,16304,16306,16316,16328,16332,16340,16342,16346,16350,16354,16356,16370,16382,16386,16418,16422,16434,16450,16458,16462,16464,16476,16488,16498,16500,16506,16538,16540,16556,16558,16562,16566,16582,16588,16590,16610,16612,16616,16620,16634,16638,16660,16662,16668,16690,16696,16698,16714,16716,16722,16808,16810,16816,16834,16862,16864,16870,16880,16882,16886,16890,16894,16896,16906,16912,16914,16942,16960,16966,16968,17024,17026,17032,17042,17044,17048,17052,17056,17058,17068,17074,17076,17096,17098,17102,17106,17110,17112,17120,17124,17136,17146,17148,17154,17176,17182,17184,17200,17202,17208,17266,17284,17290,17292,17338,17344,17346,17362,17364,17370,17618,17620,17626,17644,17698,17780,17782,17788,17806,17834,17836,17842,17852,17854,17858,17862,17866,17868,17878,17884,17886,17914,17932,17938,17940,18022,18076,18094,18100,18102,18266,18268,18274,18292,18320,18322,18328,18338,18340,18344,18348,18352,18354,18364,18370,18372,18400,18418,18424,18426,18482,18484,18490,18500,18502,18506,18510,18514,18516,18526,18532,18534,18554,18556,18560,18564,18568,18570,18578,18582,18594,18604,18606,18612,18634,18640,18642,18658,18660,18666,18724,18742,18748,18750,18796,18802,18804,18820,18822,18828,3320,3374,3392,3398,3400,3536,3562,3608,3614,3632,3634,3640,4040,4048,4094,4100,4102,4118,4120,4126,4256,4264,4282,4334,4336,4342,5504,5506,5552,5558,5576,5578,5584,5720,5746,5792,6224,6226,6232,6278,6280,6286,6440,6442,6448,7694,7748,7772,7774,7910,7934,7982,7988,8006,8008,8014,8420,8474,8476,8500,8630,8636,8654,8708,8710,8716,9152,9206,9230,9232,9368,9386,9440,9446,9448,9464,9466,9472,10340,10358,10412,10418,10420,10436,10438,10444,10502,10526,10528,10556,10592,10604,10608,10634,10636,10646,10658,10662,10670,10672,10684,10686,10736,10742,10744,10760,10762,10768,10790,10808,10820,10824,10838,10842,10868,10870,10876,10886,10888,10892,10896,10900,10902,10912,10918,10920,11336,11390,11392,11416,11546,11552,11570,11624,11626,11632,11798,11822,11870,11876,11894,11896,11902,11960,11984,11986,12014,12050,12062,12066,12092,12094,12104,12116,12120,12128,12130,12142,12144,12194,12200,12218,12220,12226,12254,12266,12278,12282,12290,12306,12326,12328,12334,12344,12350,12354,12360,12370,12376,12378,12518,12524,12542,12596,12598,12604,12686,12688,12712,12740,12776,12792,12820,12830,12832,12844,12846,12856,12920,12922,12928,12974,12992,12998,13002,13008,13026,13072,13078,13080,14252,14254,14300,14306,14324,14326,14332,14468,14494,14540,14972,14974,14980,15026,15028,15034,15188,15190,15196,15704,15712,15758,15764,15766,15782,15784,15790,15920,15928,15946,15998,16000,16006,16172,16198,16244,16250,16268,16270,16276,16334,16352,16358,16360,16388,16424,16436,16440,16460,16466,16468,16478,16490,16494,16502,16504,16508,16512,16516,16518,16568,16574,16592,16594,16600,16630,16640,16652,16656,16666,16678,16700,16702,16708,16718,16724,16728,16734,16744,16750,16752,16892,16900,16918,16970,16972,16978,17054,17060,17062,17078,17080,17086,17108,17116,17152,17156,17160,17164,17186,17188,17194,17204,17206,17210,17214,17218,17220,17230,17236,17238,17294,17296,17302,17350,17368,17372,17376,17380,17398,17446,17452,17454,17888,17890,17896,17942,17944,17950,18104,18106,18112,18356,18382,18428,18512,18518,18536,18538,18544,18572,18574,18608,18610,18622,18624,18644,18646,18652,18662,18668,18672,18678,18688,18694,18696,18752,18814,18824,18840,18850,18912,19076,19078,19084,19238,19240,19246,19292,19294,19300,19336,19342,19344,19390,19396,19398,19552,19558,19560,9953,9959,9961,10115,10121,10123,10169,10175,10177,10609,10655,10681,10817,10823,10825,10843,10849,10895,10897,12059,12065,12067,12119,12137,12145,12275,12281,12283,12299,12301,12307,12353,12361,12761,12767,12769,12787,12793,12839,12865,13001,13003,13009,13027,13081,16433,16439,16441,16495,16513,16519,16649,16673,16675,16729,17135,17141,17143,17161,17167,17215,17239,17375,17377,17401,17455,18593,18599,18601,18617,18619,18625,18679,18697,18833,18835,18859,18913];

def fromTernary(xs): return reduce( lambda z,x: 3 * z + x , xs );

def is_valid_position(xss): return fromTernary( "_XO".index(x) for xs in xss for x in xs ) in VALID


